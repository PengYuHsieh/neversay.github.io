<g!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="keywords" lang="zh-Hant-TW" content="Frozen, 冰雪奇緣, Parallax, 會呼吸的痛" />
    <meta property="og:image" content="http://neversay.github.io/parallax/images/Cover.jpg"/>
    <meta property="og:description" content="Parallax練習，以「會呼吸的痛」加上「冰雪奇緣」(Frozen)為素材"/>
    <meta property="og:title" content="多軸滾動介面(Parallax)練習"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://neversay.github.io/parallax/"/>
    <title>Parallax  in Frozen by Neversay</title>
    <link rel="stylesheet" href="styles/parallax.css"/>
    <link rel="stylesheet" href="styles/simple.css"/>
    <style>

      /* demo styles */
      body, html {
        overflow: hidden;
      }
      body {
        font: 100% / 1.5 Arial;
      }
      * {
        margin:0;
        padding:0;
      }
      .parallax {
        font-size: 200%;
      }


      .parallax img.right {
        position: absolute!important;
        left: auto!important;
        right: 5%!important;
      }
      .parallax img.center {
        position: absolute!important;
        left: 25%!important;
      }

      .lyric {
        font-family: monospace;
        font-weight: bold;
        font-size: 120%;
        display: inline-block;
        position: relative;
        left: 5%;
        bottom: 20%;
      }
      .card.two-faced .top .lyric {
        bottom: 60%;
        left: 5%;
      }
      .card.two-faced .bottom .lyric {
        bottom: 10%;
      }

      .lyric.anna {
        color: palevioletred;
      }
      .lyric.anna:before {
        content: 'Anna：';
      }

      .lyric.elsa {
        color: purple;
      }
      .lyric.elsa:before {
        content: 'Elsa：';
      }

      .lyric.black, .lyric.white {
        border-radius: 90px;
        padding: 0 2%;
      }
      .lyric.black {
        background: rgba(0,0,0,0.5);
      }
      .lyric.white {
        background: rgba(255,255,255,0.5);
      }

      .full-screen, .full-screen  img {
        width: 100%;
        height: 100%;
      }

      .memory {
        height:30vh;
        margin-top:60vh;
        position: relative;
      }
      .memory img {
        border-radius: 100px;
      }

      .shot img, .card img {
        border-radius:10px;
      }

      .card {
        width: 100%;
        height: 50vh;
        background-color: #FAFAFC;
        margin-top:100vh;
        position: relative;
      }
      .card img {
        max-width: 50%;
        height: 80%;
        position: relative;
        top: 10%;
        left: 2%;
      }

      .card.two-faced .top, .card.two-faced .bottom {
        width: 100%;
        height: 50vh;
        position: relative;
      }
      .card.two-faced .top img , .card.two-faced .bottom img {
        max-width: 50%;
        height: 80%;
        position: relative;
        left: 2%;
      }
      .card.two-faced .top img {
        top: -10%;
      }
      .card.two-faced .bottom img {
        top: 10%;
      }
      .card.two-faced .top.still.hide {
        display:block;
        position: absolute;
      }

      .card.two-faced .hide {
        display: none;
      }


      .shot {
        width: 100%;
        height: 50vh;
        background-color: #D4F1FA;
        margin-top:150vh;
        position: relative;
      }
      .shot img {
        max-width: 50%;
        height: 80%;
        position: relative;
        top: 10%;
        left: 2%;
      }

      .background-image-blue {
        background-image: url(images/Frozen-background-blue.jpg);
        opacity: 0.1;
        position: absolute;
        top:0;
        left:0;
        right:0;
        bottom:0;
        z-index:0
      }

      .background-image-white {
        background-image: url(images/Frozen-background-white.jpg);
        opacity: 0.4;
        position: absolute;
        top:0;
        left:0;
        right:0;
        bottom:0;
        z-index:0
      }
    </style>
  </head>
  <body>
    <div class="parallax">
      <div class="parallax__group">
        <div class="parallax__layer parallax__layer--fore">
          <div class="full-screen"><img src="images/Frozen_logo.jpg"/></div>
          <div class="memory l5" style="margin-top:5750vh;"><img class="image1000" src="images/memory1.jpg"/></div>
          <div class="memory l45"><img class="image1001" src="images/memory2.jpg"/></div>
          <div class="memory l15"><img class="image1002" src="images/memory3.jpg"/></div>
          <div class="memory l60"><img class="image1003" src="images/memory4.jpg"/></div>
          <div class="memory l10"><img class="image1004" src="images/memory5.jpg"/></div>
          <div class="memory l60"><img class="image1005" src="images/memory6.jpg"/></div>
          <div class="memory l5"><img class="image1006" src="images/memory7.jpg"/></div>
          <div class="memory l45"><img class="image1007" src="images/memory8.jpg"/></div>
          <div class="memory l60"><img class="image1008" src="images/memory9.jpg"/></div>
          <div class="memory l10"><img class="image1009" src="images/memory10.jpg"/></div>
        </div>

        <div class="parallax__layer parallax__layer--base">
          <div class="shot" style="margin-top:150vh;">
            <div class="background-image-blue"></div>
            <img class="image2" src="images/2.jpg"/>
            <div class="anna lyric">看燈火模仿　墜落的星光</div>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image4" src="images/4.jpg"/>
            <div class="anna lyric">一個人完成</div>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image6" src="images/6.jpg"/>
            <span class="anna lyric">你總說　時間還很多</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image8" src="images/8.jpg"/>
            <span class="anna lyric">以前我不懂得</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image10" src="images/10.jpg"/>
            <span class="anna lyric">就有以後</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image12" src="images/12.jpg"/>
            <span class="anna lyric">它活在我身上所有角落</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image14" src="images/14.jpg"/>
            <span class="anna lyric">看你的信會痛</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image16" src="images/16.jpg"/>
            <span class="anna lyric">遺憾是會呼吸的痛</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <span class="anna lyric t50">後悔不貼心會痛<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;恨不懂你會痛</span>
            <img class="image18 right" src="images/18.jpg"/>
          </div>
          <div class="shot o0">
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image19 center w50" src="images/19.jpg"/>
          </div>
          <div class="shot o0">
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
              <img class="image23" src="images/23.jpg"/>
              <span class="elsa lyric">沒看你臉上　張揚過哀傷</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image25" src="images/25.jpg"/>
            <span class="elsa lyric">你拆了城牆</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
              <img class="image27" src="images/27.jpg"/>
              <span class="elsa lyric">在原地等我</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image29" src="images/29.jpg"/>
            <span class="anna lyric">你沒說　你也會軟弱</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
              <img class="image31" src="images/31.jpg"/>
              <span class="elsa lyric">我就裝不曉得</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image33 right" src="images/33.jpg"/>
            <span class="elsa lyric t50">想念是會呼吸的痛</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image34" src="images/34.jpg"/>
            <span class="elsa lyric">哼你愛的歌會痛</span>
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image36" src="images/36.jpg"/>
            <span class="elsa lyric">連沉默也痛</span>
          </div>
          <div class="shot o0">
          </div>
          <div class="shot o0">
          </div>
          <div class="shot o0">
          </div>
          <div class="shot o0">
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image38" src="images/38.jpg"/>
            <span class="elsa lyric">恨不懂你會痛</span>
          </div>
          <div class="shot o30" style="background:black;">
            <img class="image39 center" src="images/39.jpg"/>
          </div>
          <div class="shot o0">
          </div>
          <div class="shot">
            <div class="background-image-blue"></div>
            <img class="image41" src="images/41.jpg"/>
            <span class="elsa lyric">我的微笑都假了　靈魂像飄浮著</span>
          </div>
          <div class="shot" style="background-color: rgba(255,255,255,0.3);">
            <div class="background-image-blue"></div>
            <span class="elsa lyric posA t50 l35">我發誓不讓你等候</span>
          </div>
          <div class="shot" style="background-color: rgba(255,255,255,0.3);">
            <div class="background-image-blue"></div>
            <img class="image44 posA la r0 t50 o60" style="border-radius:50px" src="images/44.jpg"/>
            <img class="image45" src="images/45.jpg"/>
            <img class="image46 posA la r10 tN50 o60" style="border-radius:50px" src="images/46.jpg"/>
            <span class="elsa lyric white">我越來越像貝殼</span>
          </div>
        </div>

        <div class="parallax__layer parallax__layer--back">
          <div class="card two-faced" style="margin-top:100vh;">
            <div class="background-image-white"></div>
            <div class="top">
              <img class="image1" src="images/1.jpg"/>
              <div class="anna lyric">在東京鐵塔　第一次眺望</div>
            </div>
            <div class="bottom">
              <img class="image3" src="images/3.jpg"/>
              <span class="anna lyric">我終於到達　但卻更悲傷</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image5" src="images/5.jpg"/>
            <span class="anna lyric">我們的夢想</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top">
              <img class="image7" src="images/7.jpg"/>
              <span class="anna lyric">你可以等我</span>
            </div>
            <div class="bottom">
              <img class="image9" src="images/9.jpg"/>
              <span class="anna lyric">未必明天</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image11" src="images/11.jpg"/>
            <span class="anna lyric">想念是會呼吸的痛</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top">
              <img class="image13" src="images/13.jpg"/>
              <span class="anna lyric">哼你愛的歌會痛</span>
            </div>
            <div class="bottom">
              <img class="image15" src="images/15.jpg"/>
              <span class="anna lyric">連沉默也痛</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image17" src="images/17.jpg"/>
            <span class="anna lyric">它流在血液中來回滾動</span>
          </div>
          <div class="card two-faced" style="box-shadow:0 -15px 20px rgba(0,0,0,0.30);background:linear-gradient(to bottom,rgba(0,0,0,0.3) 3%, rgba(0,0,0,0.5) 10%, rgba(0,0,0,0.9) 18%, black 40%, rgba(0,0,0,0.8) 90%);">
            <div class="top still">
              <span class="anna lyric l40 b40 black">想見不能見最痛</span>
            </div>
            <div class="bottom">
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image20 center w50" src="images/20.jpg"/>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top">
              <img class="image21 z1 tN20" src="images/21.jpg"/>
              <img class="image22 right z0" src="images/22.jpg"/>
            </div>
            <div class="bottom">
              <span class="elsa lyric t70">那是種多麼　寂寞的倔強</span>
              <img class="image right" src="images/24.jpg"/>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image26" src="images/26.jpg"/>
            <span class="elsa lyric">讓我去流浪</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top">
              <img class="image28 tN20" src="images/28.jpg"/>
              <span class="elsa lyric">把自己捆綁</span>
            </div>
            <div class="bottom">
              <img class="image30" src="images/30.jpg"/>
              <span class="anna lyric">需要倚賴我</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <img class="image32" src="images/32.jpg"/>
            <span class="elsa lyric">自由移動　自我地過</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top">
              <span class="elsa lyric l35 b40 white">它活在我身上所有角落</span>
            </div>
            <div class="bottom">
              <img class="image35" src="images/35.jpg"/>
              <span class="elsa lyric">看你的信會痛</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top still">
              <img class="image37 center t10" src="images/37.jpg"/>
              <span class="elsa lyric l35 b40 white">遺憾是會呼吸的痛</span>
            </div>
            <div class="bottom">
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <span class="elsa lyric l35 b40 white">它流在血液中來回滾動</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top still">
              <span class="elsa lyric l35 b40 white">後悔不貼心會痛</span>
            </div>
            <div class="bottom">
              <span class="elsa lyric l35 t120 white">想見不能見最痛</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
              <img class="image40" src="images/40.jpg"/>
              <span class="elsa lyric">我發誓不再說謊了</span>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top still">
              <span class="elsa lyric l35 b40 white">多愛你就會抱你多緊的</span>
            </div>
            <div class="bottom">
              <img class="image42" src="images/42.jpg"/>
              <span class="elsa lyric">你在就好了</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <span class="elsa lyric t50">陪你做想做的無論什麼</span>
            <img class="image43 right" src="images/43.jpg"/>
          </div>
          <div class="card two-faced">
            <div class="background-image-white"></div>
            <div class="top still">
              <span class="elsa lyric l35 b40 white">怕心被人觸碰</span>
            </div>
            <div class="bottom still">
              <span class="elsa lyric l35 t120 white">你回來那就好了</span>
            </div>
          </div>
          <div class="card">
            <div class="background-image-white"></div>
            <span class="elsa lyric l35 t45">能重來那就好了</span>
          </div>
        </div>

        <div class="parallax__layer parallax__layer--deep">
          <div class="full-screen"><img src="images/Frozen-Movie-Summer_Arendelle-HD-Wallpaper1.jpg"/></div>
          <div class="full-screen"><img src="images/Frozen-Movie-Ice-Castle-HD-Wallpaper1.jpg"/></div>
          <div class="full-screen"><img src="images/YoungAE.jpg"/></div>
          <div class="full-screen"><img src="images/Anna-Door.jpg"/></div>
          <div class="full-screen"><img src="images/A-Sister-More-Like-Me-book-frozen-35706725-1212-779.jpg"/></div>
          <div class="full-screen"><img src="images/Frozen-funeral.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa-Grief.jpg"/></div>
          <div class="full-screen"><img src="images/Anna_Sad.jpg"/></div>
          <div class="full-screen"><img src="images/Queen-Elsa.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Sad_Queen.jpg"/></div>
          <div class="full-screen"><img src="images/Ball_Ice_Wall.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Run_Fjord.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Fear_Cannot_Conceal.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Leave.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Angry_1.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Angry_3.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Angry_4.jpg"/></div>
          <div class="full-screen"><img src="images/Anna_Near_Death.jpg"/></div>
          <div class="full-screen"><img src="images/Annas_Fate.jpg"/></div>
          <div class="full-screen"><img src="images/Elsa_Anna_Hug.jpg"/></div>
          <div class="full-screen">
            <img class="image48 posA" src="images/47.jpg"/>
            <img class="image49 posA" style="opacity:0" src="images/Elsa_Anna_Skate_2.jpg"/>
          </div>
          <div class="full-screen"><img src="images/Frozen_Screen_Final.jpg"/></div>
          <div class="full-screen"><img src="images/Castle.jpg"/></div>
          <div class="w100 h50"><div class="posR w100 h100 t45 l45">The End</div></div>
        </div>

      </div>


    </div>
    <script type="text/javascript">
      var body = document.querySelector('.parallax'), twoFaceList = body.querySelectorAll('.card.two-faced'), prevProgress = -1;
      var getProgress = function(){
        return parseInt(body.scrollTop * 100 / document.body.clientHeight);
      },
      twoFaceHandler = function (gate) {
        var i = 0;
        // Turn to bottom
        for (;i < gate;i++) {
          if (twoFaceList[i] && null === twoFaceList[i].querySelector('.top').className.match('hide')) {
            twoFaceList[i].querySelector('.top').className += ' hide';
            twoFaceList[i].querySelector('.bottom').className = twoFaceList[i].querySelector('.bottom').className.replace(' hide', '');
          }
        }
        // Keep to top
        for (;i < twoFaceList.length;i++) {
          if (twoFaceList[i] && null === twoFaceList[i].querySelector('.bottom').className.match('hide')) {
            twoFaceList[i].querySelector('.top').className = twoFaceList[i].querySelector('.top').className.replace(' hide', '');
            twoFaceList[i].querySelector('.bottom').className += ' hide';
          }
        }
      },
      fadeInOutHandler = function (progress) {
        // image 17 18
        opacityImage(progress, 1500, 1600, 17);
        opacityImage(progress, 1650, 1700, 18);
        for (var i = 0; i < 10; i++) {
          opacityImage(progress, 4000 + 60*i, 4200 + 60*i, 1000 + i, memoryEffect);
        }
        if (0 == progress % 5) {
          opacityImage(progress, 6000, 6100, 48, fadeOutEffect);
          opacityImage(progress, 5950, 6100, 49);
        }
      },
      opacityImage = function (progress, start, end, imgNum, customizedFunc) {
        if (progress > start && progress < end) {
          var img = document.querySelector('.image'+imgNum);
          if (img && img.style) {
            img.style.opacity = (customizedFunc && customizedFunc(progress, start, end)) || ((progress - start)/(end - start));
          }
        }
      },
      memoryEffect = function (progress, start, end) {
        // Range : 0.3 ~ 0.6
        return 0.3 + ((Math.sin(Math.PI * progress/50)+1) * 0.15);
      },
      fadeOutEffect = function (progress, start, end) {
        return 1 - ((progress - start)/(end - start));
      };

      body.addEventListener('scroll', function (e){
        var progress = getProgress();
        // Gate 110 710 1310 = 110 + n * 600
        var gate = Math.floor((progress + 490)/600);
        fadeInOutHandler(progress);
        if (prevProgress === progress){ return; }
        prevProgress = progress;
        twoFaceHandler(gate);
      });
    </script>
  </body>
</html>